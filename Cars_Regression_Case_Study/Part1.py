# To work with dataframes
import pandas as pd

# To perform numerical operations
import numpy as np

# To visualize data
import seaborn as sns
import matplotlib.pyplot as plt  # pyplot means python plot

import gotoDataDir

# =====================================================
# Setting dimensions for plot
# =====================================================
sns.set(rc={'figure.figsize':(11.7, 8.27)})

# =====================================================
# Reading CSV file
# =====================================================
cars_data=pd.read_csv('cars_samples.csv')

# =====================================================
# Creating copy
# =====================================================
cars = cars_data.copy()

# =====================================================
# Structure of the dataset
# =====================================================
info = cars.info()
print(info)

'''
Data columns (total 19 columns):
 #   Column               Non-Null Count  Dtype 
---  ------               --------------  ----- 
 0   dateCrawled          50001 non-null  object
 1   name                 50001 non-null  object
 2   seller               50001 non-null  object
 3   offerType            50001 non-null  object
 4   price                50001 non-null  int64 
 5   abtest               50001 non-null  object
 6   vehicleType          44813 non-null  object
 7   yearOfRegistration   50001 non-null  int64 
 8   gearbox              47177 non-null  object
 9   powerPS              50001 non-null  int64 
 10  model                47243 non-null  object
 11  kilometer            50001 non-null  int64 
 12  monthOfRegistration  50001 non-null  int64 
 13  fuelType             45498 non-null  object
 14  brand                50001 non-null  object
 15  notRepairedDamage    40285 non-null  object
 16  dateCreated          50001 non-null  object
 17  postalCode           50001 non-null  int64 
 18  lastSeen             50001 non-null  object
dtypes: int64(6), object(13)
memory usage: 7.2+ MB

There are some missing values in VehicleType, gearbox, model, fuelType and nonRepairedDamage.
There are 6 columns of int64 data type and 13 columns of object data type.
'''

# =====================================================
# Summarizing data - describe() gives the summary of numeric columns
# =====================================================
#summary = cars.describe()
pd.set_option('display.float_format', lambda x: '%.3f' % x)
pd.set_option('display.max_columns', 500)


###### Let's check the outliers in numerical variables(columns). Outliers can exist in numerical columns only #######

summary = cars.describe()
print(summary)
'''
             price  yearOfRegistration   powerPS  kilometer  \
count    50001.000           50001.000 50001.000  50001.000   
mean      6559.865            2005.544   116.496 125613.688   
std      85818.470             122.992   230.568  40205.234   
min          0.000            1000.000     0.000   5000.000   
25%       1150.000            1999.000    69.000 125000.000   
50%       2950.000            2003.000   105.000 150000.000   
75%       7190.000            2008.000   150.000 150000.000   
max   12345678.000            9999.000 19312.000 150000.000   

       monthOfRegistration  postalCode  
count            50001.000   50001.000  
mean                 5.744   50775.217  
std                  3.711   25743.702  
min                  0.000    1067.000  
25%                  3.000   30559.000  
50%                  6.000   49504.000  
75%                  9.000   71404.000  
max                 12.000   99998.000  

The mean (average) of a data set is found by adding all numbers in the data set and then dividing by the number of values in the set.
The median is the middle value when a data set is ordered from least(min) to greatest(max).

There is a huge difference between mean and median(50%) price. It shows that data is skewed. 
yearOfRegistration 1000,9999 do not make any sense
PowerPS (Horse Power) min value is 0 and max value is 19312. It doesn't make sense. 
monthOfRegistration 0 doesn't make sense.
postalCode - we can get rid of it
'''

# =====================================================
# Dropping unwanted columns
# =====================================================

col = ['name', 'dateCrawled', 'dateCreated', 'postalCode', 'lastSeen']
cars = cars.drop(columns=col, axis=1) # axis=1 means columns. axis=0 means rows.

# =====================================================
# Removing duplicate records
# =====================================================
cars.drop_duplicates(keep='first', inplace=True)
#470 duplicate records

# =====================================================
# Data cleaning
# =====================================================
# No. of missing values in each column
print("Missing values in each column")
# isNull() will create a dataframe with the cells True/False. We will take sum of Trues.
print(cars.isnull().sum())
'''
seller                    0
offerType                 0
price                     0
abtest                    0
vehicleType            5152
yearOfRegistration        0
gearbox                2765
powerPS                   0
model                  2730
kilometer                 0
monthOfRegistration       0
fuelType               4467
brand                     0
notRepairedDamage      9640
dtype: int64

Process finished with exit code 0

'''

# Variable yearOfRegistration
yearwise_count = cars['yearOfRegistration'].value_counts().sort_index()
print("Yearwise count: \n", yearwise_count.to_string())
'''
Yearwise count: 
 yearOfRegistration
1000       6
1255       1
1500       2
1910      14
1928       1
1929       1
1933       1
1934       1
1936       2
1938       1
1940       1
1941       1
1943       2
1945       2
1947       2
1950       4
1951       4
1952       3
1953       2
1954       1
1955       6
1956       7
1957       5
1958       4
1959       5
1960      32
1961       7
1962       6
1963      11
1964      16
1965      11
1966      13
1967      18
1968       7
1969      25
1970      55
1971      27
1972      39
1973      17
1974      24
1975      21
1976      31
1977      28
1978      49
1979      49
1980      77
1981      32
1982      39
1983      57
1984      49
1985     110
1986      53
1987      80
1988     132
1989     197
1990     395
1991     408
1992     391
1993     455
1994     622
1995    1267
1996    1403
1997    1956
1998    2428
1999    3026
2000    3275
2001    2782
2002    2554
2003    2731
2004    2597
2005    3101
2006    2660
2007    2347
2008    2186
2009    2010
2010    1643
2011    1544
2012    1235
2013     816
2014     623
2015     405
2016    1351
2017    1375
2018     528
2019       2
2222       1
2900       1
3000       1
3500       1
3800       1
5000       3
6000       4
7500       1
7800       1
8500       1
8888       2
9999       7

You can see that there are not much data for the year < 1950 and > 2018. Considerable amount of cleanup can be done.
'''
# filtering data
cars_with_year_of_registration_greater_than_2018 = cars[cars['yearOfRegistration'] > 2018]
print("total records with yearOfRegistration > 2018")
print(cars_with_year_of_registration_greater_than_2018.shape[0]) # 26
# or
# cars_with_year_of_registration_greater_than_2018[cars_with_year_of_registration_greater_than_2018.columns[0]].count()
cars_with_year_of_registration_lesser_than_1950 = cars[cars['yearOfRegistration'] < 1950]
print("total records with yearOfRegistration < 1950")
print(cars_with_year_of_registration_lesser_than_1950.shape[0]) # 38

plt.figure(figsize=(7,6))
plt.scatter(x=cars['yearOfRegistration'], y=cars['price'], c='blue')
plt.show()
# Metplotlib's scatter plot is same as Seaborn's regplot without regression line(fit_reg=True)
plt.figure(figsize=(7,6))
sns.regplot(x='yearOfRegistration', y='price', scatter=True, fit_reg=False, data=cars)
plt.show()
# this plot is not explaining much  because there are some records with very high price
# and that is affecting the plot with other prices and also yearOfRegistrations ranges is affected because of outliers.

# Variable price
'''
Histogram plot is used for Numerical data.
https://www.geeksforgeeks.org/how-to-make-histograms-with-density-plots-with-seaborn-histplot/
Bar plot/Count Plot is used for Categorical data.
'''
price_count=cars['price'].value_counts().sort_index()
print(price_count.to_string())
'''
price=0 doesn't make sense. It is an outlier. it should be removed.

price
0           1415
1            172
2              1
3              1
5              4
7              1
8              2
10             5
11             1
12             1
14             1
15             8
20             6
21             1
25             5
26             1
30             7
35             4
39             1
40             3
45             6
50            41
55             3
60             7
65             1
70             2
75             9
77             1
80            12
85             3
90             5
95             2
98             1
99            15
100          145
101            1
110            2
111            3
120           31
121            1
122            1
125            6
129            2
130           11
135            2
139            2
140            5
145            2
149            5
150          183
155            1
156            1
159            1
160            9
170           13
175            8
180           35
185            2
189            4
190           18
195            3
199           35
200          278
202            1
209            2
210            3
215            2
219            1
220           25
222            7
225            4
230           12
233            1
235            5
238            1
240            5
245            2
249           10
250          296
252            1
255            1
259            1
260            6
261            1
263            1
265            1
270            8
275            8
279            1
280           20
284            1
285            1
289            2
290           15
295            1
299           55
300          361
310            1
320           13
321            1
323            1
325            4
329            1
330            8
331            1
333           16
340            5
349            8
350          327
355            1
359            2
360            4
365            1
370           16
375            2
380           29
385            1
390           24
395            1
398            1
399           77
400          326
410            1
420            9
422            2
429            1
430            6
440            4
444           11
449            7
450          277
455            2
460            5
470            4
475            6
479            2
480           20
485            2
489            1
490           38
495            1
499           87
500          740
510            2
519            1
520            8
522            1
523            1
525            5
530            7
540            1
549           18
550          341
554            1
555           25
560            6
570            6
575            5
579            1
580           22
588            1
590           41
595            4
599          110
600          540
601            1
606            1
610            3
620            5
622            1
624            1
625            6
630            3
639            1
640            3
644            1
649           19
650          407
660            1
666           16
667            1
669            1
670            4
675            9
680           30
686            1
689            1
690           43
695            5
696            1
698            2
699          131
700          390
719            1
720            6
725            1
729            1
730            1
740            3
744            1
749           24
750          424
755            3
760            7
766            1
768            1
770            7
775            3
777           17
780           19
785            2
788            2
790           49
793            1
795            3
799          114
800          467
820            5
825            3
829            1
830            5
835            1
839            2
840            4
845            2
849           18
850          444
851            1
855            3
859            1
870            9
875            4
877            1
879            1
880           12
888           20
889            1
890           60
895            2
897            1
898            2
899          114
900          393
901            1
907            1
910            3
920            4
925            2
929            1
930            2
935            1
940            1
943            1
944            1
945            1
949            9
950          355
955            1
960            4
965            1
966            1
970            6
980           39
985            2
988            1
989            1
990          142
993            1
995            7
996            1
998            6
999          448
1000         641
1001           2
1040           2
1049           4
1050          96
1052           1
1055           1
1060           1
1070           1
1080           3
1089           1
1090          13
1099          52
1100         389
1111          31
1120           1
1125           1
1144           1
1149           7
1150         227
1155           1
1159           1
1175           2
1180           3
1190          40
1192           1
1195           3
1198           2
1199          89
1200         580
1201           1
1210           1
1212           1
1222           4
1224           1
1231           1
1234           2
1240           3
1249           5
1250         316
1255           2
1270           2
1275           1
1280           8
1290          52
1295           6
1298           2
1299         121
1300         386
1311           1
1320           1
1321           1
1325           1
1333           6
1349           3
1350         275
1360           1
1361           1
1370           3
1375           1
1379           1
1380          13
1388           1
1390          35
1395           3
1399         100
1400         298
1420           1
1430           4
1432           1
1441           1
1444           4
1448           2
1449           6
1450         244
1455           1
1460           2
1475           2
1480          14
1490          99
1494           1
1495           1
1498           2
1499         190
1500         700
1510           1
1520           2
1525           1
1529           1
1530           1
1549           8
1550         137
1555          11
1560           1
1570           1
1579           1
1580           8
1585           1
1590          53
1595           1
1598           1
1599          92
1600         357
1620           2
1629           1
1630           1
1640           1
1645           1
1648           1
1649           8
1650         233
1660           6
1666           5
1670           1
1675           2
1680           5
1689           1
1690          62
1695           3
1699          84
1700         279
1710           1
1749           2
1750         216
1759           1
1770           4
1775           1
1777           1
1779           1
1780           4
1789           1
1790          56
1795           4
1799          67
1800         361
1820           3
1823           1
1840           2
1849          10
1850         191
1860           5
1870           2
1875           1
1880           1
1888           4
1890          42
1897           1
1899          53
1900         258
1910           1
1920           1
1930           1
1940           1
1949           2
1950         234
1960           1
1970           2
1975           1
1980          18
1989           2
1990         126
1995           5
1998           5
1999         324
2000         495
2005           1
2049           2
2050          22
2070           1
2090           2
2091           1
2095           1
2099          15
2100         195
2128           1
2130           2
2134           1
2149           5
2150         103
2151           1
2170           2
2180           4
2190          30
2195           1
2199          61
2200         369
2210           1
2222          40
2240           2
2241           1
2249           4
2250         135
2280           4
2288           1
2290          30
2295           1
2299          57
2300         255
2314           1
2321           1
2329           1
2333           6
2345           7
2349           3
2350         125
2360           1
2366           1
2375           2
2380           5
2389           1
2390          28
2395           1
2398           3
2399          58
2400         217
2420           1
2440           2
2444           7
2448           1
2449           4
2450         131
2460           1
2470           1
2475           1
2480           5
2489           1
2490          76
2495           3
2499         137
2500         587
2512           1
2520           1
2530           1
2540           1
2549           3
2550          57
2555           7
2570           1
2580           3
2589           1
2590          24
2599          46
2600         259
2620           1
2625           1
2629           1
2649           4
2650         108
2651           1
2657           1
2660           3
2666           3
2671           1
2680           4
2690          33
2698           2
2699          34
2700         207
2720           1
2727           1
2740           1
2744           1
2749           4
2750         154
2777           1
2780           2
2789           1
2790          31
2798           2
2799          56
2800         287
2828           1
2849           1
2850         112
2860           1
2875           1
2880           2
2888           9
2889           1
2890          27
2897           1
2899          31
2900         244
2920           2
2930           1
2940           1
2944           1
2945           1
2949           1
2950         174
2960           2
2970           1
2977           1
2980          10
2986           1
2990         143
2995           6
2998           2
2999         236
3000         346
3015           1
3021           1
3050          12
3070           1
3090           2
3099          10
3100         132
3120           1
3125           1
3130           1
3140           1
3149           3
3150          51
3160           1
3180           1
3190          14
3199          35
3200         278
3210           3
3222           3
3225           1
3249           1
3250          90
3256           1
3270           1
3275           1
3280           3
3290          15
3295           1
3299          39
3300         202
3320           1
3330           6
3333          33
3350          62
3380           3
3390          26
3399          23
3400         131
3410           1
3420           1
3449           2
3450          91
3452           1
3455           2
3470           1
3480           8
3490          46
3495           7
3496           1
3499         107
3500         494
3525           1
3540           1
3544           1
3549           1
3550          41
3555           6
3560           2
3580           3
3590          21
3591           1
3599          23
3600         165
3622           1
3633           1
3649           1
3650          86
3666           3
3670           1
3680           3
3690          21
3699          26
3700         148
3710           1
3715           1
3745           1
3749           1
3750         118
3760           1
3777           2
3780           3
3785           1
3789           1
3790          23
3799          37
3800         217
3840           1
3845           1
3850          97
3880           2
3888           2
3890          13
3895           1
3898           1
3899          19
3900         211
3940           2
3945           1
3949           2
3950         139
3960           2
3970           2
3980          10
3989           2
3990         111
3995           4
3997           1
3998           3
3999         224
4000         262
4005           1
4050           5
4090           1
4099           9
4100          83
4124           1
4125           1
4150          41
4159           1
4165           1
4180           1
4190           7
4198           2
4199          30
4200         189
4201           1
4222           1
4230           1
4249           2
4250         100
4260           1
4270           1
4278           1
4290          15
4298           1
4299          24
4300         127
4320           1
4321           3
4330           1
4333           1
4349           1
4350          39
4380           2
4390          14
4395           1
4399          24
4400          97
4430           1
4440           4
4444          24
4449           1
4450          41
4460           1
4480           4
4484           1
4485           2
4490          48
4495           3
4497           1
4498           1
4499          66
4500         417
4525           1
4538           1
4549           1
4550          32
4555           2
4567           1
4590          17
4595           2
4599          12
4600          77
4622           1
4645           1
4650          49
4660           1
4666           2
4670           1
4680           3
4690           6
4699          20
4700          94
4720           2
4749           1
4750          78
4755           2
4770           1
4775           2
4777           2
4780           4
4785           1
4786           1
4790          19
4799          22
4800         163
4830           1
4850          56
4855           1
4880           2
4888           1
4889           1
4890          16
4895           2
4898           1
4899          20
4900         174
4901           1
4909           1
4925           1
4940           1
4949           1
4950          97
4955           1
4977           1
4980           4
4990          89
4995           4
4997           1
4999         198
5000         254
5005           1
5008           1
5015           1
5050           1
5090           1
5099           1
5100          68
5120           1
5149           1
5150          19
5180           1
5190           3
5198           1
5199          32
5200         150
5222           1
5234           1
5250          51
5280           1
5285           1
5289           1
5290          11
5299          24
5300         107
5333           3
5349           1
5350          25
5375           1
5390           9
5398           1
5399          17
5400          94
5430           1
5432           1
5444           1
5445           1
5449           1
5450          34
5454           1
5480           3
5485           1
5490          42
5498           1
5499          45
5500         341
5540           3
5550          22
5555          24
5570           1
5580           1
5590           5
5599           9
5600          89
5630           1
5648           1
5650          22
5660           1
5666           1
5690          13
5697           1
5699          15
5700          82
5740           1
5749           1
5750          46
5755           1
5765           1
5780           2
5790           9
5795           1
5799          18
5800         165
5822           1
5840           1
5850          47
5855           1
5860           1
5865           1
5880           1
5885           1
5888           2
5890          16
5899          15
5900         183
5940           1
5950          76
5960           1
5975           1
5980           3
5990          97
5995           6
5998           1
5999         142
6000         193
6001           1
6050           2
6066           1
6099           3
6100          39
6150          21
6190           4
6199          23
6200         120
6222           1
6249           1
6250          47
6280           3
6290          12
6295           1
6299          20
6300         104
6330           1
6333           1
6349           1
6350          28
6370           1
6380           2
6385           1
6390          12
6399          10
6400          62
6410           1
6444           1
6447           1
6449           4
6450          40
6480           2
6489           1
6490          31
6495           1
6498           1
6499          55
6500         323
6545           1
6550          16
6555           2
6588           1
6590          11
6595           2
6598           1
6599           5
6600          40
6620           1
6649           1
6650          12
6666          11
6690           8
6699           7
6700          71
6730           1
6749           3
6750          52
6770           1
6777           1
6780           1
6789           1
6790          10
6799          13
6800         120
6840           1
6849           1
6850          34
6855           1
6880           3
6888           2
6890          10
6895           1
6899          12
6900         185
6940           2
6949           1
6950          78
6970           1
6980           6
6989           1
6990          74
6995           8
6998           2
6999         134
7000         152
7007           1
7049           1
7050           3
7052           1
7099           3
7100          33
7115           1
7140           1
7149           2
7150          14
7180           1
7190           4
7199           9
7200          90
7249           2
7250          37
7270           1
7290           9
7295           1
7299          22
7300          82
7333           1
7350          14
7385           1
7390           5
7395           1
7399          21
7400          55
7420           1
7430           2
7444           1
7449           1
7450          28
7455           2
7460           1
7480           2
7485           2
7490          36
7495           1
7498           2
7499          51
7500         224
7539           1
7540           1
7545           1
7550           6
7555           3
7590           5
7598           1
7599          14
7600          46
7603           1
7650          20
7680           2
7688           1
7690           9
7695           1
7699           8
7700          54
7749           1
7750          30
7777          23
7790           7
7795           1
7799          12
7800          89
7840           1
7850          23
7875           1
7880           2
7888           2
7890          10
7899           8
7900         128
7924           1
7949           1
7950          55
7980           6
7990          70
7995           1
7996           1
7997           2
7998           2
7999         100
8000         158
8008           1
8099           1
8100          12
8129           1
8150           7
8190           3
8199           3
8200          81
8245           1
8249           2
8250          36
8258           1
8265           1
8282           1
8285           1
8290           5
8295           1
8299          14
8300          54
8330           1
8333           2
8340           1
8349           1
8350          19
8370           1
8390           1
8399           7
8400          25
8449           1
8450          33
8470           1
8480           1
8490          26
8494           1
8495           2
8499          59
8500         227
8550           8
8555           2
8560           1
8590           2
8595           1
8599           7
8600          41
8645           1
8650          24
8666           1
8675           2
8690           2
8699           7
8700          64
8750          41
8751           1
8770           2
8790           8
8799           7
8800          76
8833           1
8850          17
8870           1
8875           1
8880           1
8885           1
8887           1
8888          14
8889           1
8890           2
8895           1
8899           4
8900         149
8940           1
8950          41
8970           1
8980           2
8989           1
8990          58
8995           3
8998           1
8999          91
9000         131
9050           2
9099           2
9100          15
9130           1
9150           9
9190           1
9199           4
9200          49
9203           1
9240           1
9250          27
9280           1
9290           6
9299           6
9300          65
9350          15
9380           1
9390           3
9399           5
9400          31
9428           1
9440           1
9450          21
9455           1
9469           1
9480           3
9490          10
9495           1
9499          21
9500         212
9550           5
9577           1
9590           4
9599           6
9600          21
9650           6
9690           7
9699           3
9700          35
9750          27
9777           2
9788           1
9790           2
9799           3
9800          60
9850          21
9870           1
9880           2
9890           9
9899           7
9900         123
9920           1
9950          41
9980           4
9989           1
9990          65
9995           2
9998           1
9999         155
10000        117
10050          2
10099          1
10100          5
10111          1
10150          3
10190          1
10199          6
10200         23
10222          2
10230          1
10250         10
10280          1
10290          1
10299          5
10300         20
10310          1
10328          1
10350         10
10380          1
10399          1
10400         23
10444          1
10450          9
10472          1
10480          1
10490         19
10499         26
10500        190
10550          2
10555          1
10590          6
10599          6
10600         14
10650          4
10666          1
10690          2
10699          1
10700         20
10749          2
10750         13
10760          1
10780          2
10790          5
10799          2
10800         60
10850         10
10880          1
10890          2
10899          1
10900        114
10930          1
10949          1
10950         22
10980          2
10987          1
10988          1
10989          1
10990         53
10995          1
10998          1
10999         64
11000         93
11100          4
11111          4
11150          5
11199          4
11200         30
11220          1
11235          1
11240          1
11250         13
11290          6
11299          3
11300         23
11350          7
11390          1
11399          7
11400         21
11444          2
11449          1
11450         12
11490         21
11495          1
11498          2
11499         25
11500        165
11550          3
11555          2
11599          3
11600         12
11650          7
11690          3
11699          4
11700         20
11722          1
11750         15
11790          4
11798          1
11799          3
11800         50
11850          6
11880          1
11888          1
11890          7
11899          4
11900         96
11919          1
11928          1
11940          1
11950         25
11968          1
11979          1
11980          4
11989          1
11990         32
11995          1
11999         52
12000        103
12050          1
12059          1
12100          6
12150          2
12180          1
12190          1
12200         24
12220          1
12222          1
12250          9
12255          1
12290          2
12299          2
12300         25
12320          1
12333          1
12345          1
12350          4
12360          1
12390          2
12395          1
12399          2
12400         25
12430          1
12449          1
12450         19
12470          1
12480          1
12488          1
12490          9
12495          2
12499         20
12500        173
12550          1
12560          1
12567          1
12590          3
12599          1
12600         23
12650          3
12680          1
12690          3
12699          5
12700         25
12735          1
12749          1
12750         17
12770          1
12790          4
12799          3
12800         39
12821          1
12850          9
12877          1
12880          1
12888          1
12890          3
12899          7
12900         99
12920          1
12950         33
12980          1
12986          1
12989          1
12990         22
12995          4
12998          1
12999         46
13000         67
13099          1
13100         10
13150          6
13190          1
13199          4
13200         25
13240          1
13250         10
13290          1
13299          4
13300         16
13333          4
13350          3
13399          1
13400         19
13450         13
13470          1
13489          2
13490          9
13495          3
13498          1
13499         19
13500        128
13520          1
13550          5
13555          1
13590          3
13599          2
13600         11
13650          6
13680          1
13699          4
13700         10
13750         11
13755          1
13777          1
13780          1
13790          4
13798          1
13799          4
13800         41
13850          3
13900        109
13950         18
13975          1
13980          1
13990         38
13995          1
13998          1
13999         46
14000         71
14100          3
14140          1
14150          1
14190          1
14199          4
14200         25
14249          1
14250          7
14290          1
14299          3
14300         21
14333          1
14350          4
14390          3
14399          3
14400         13
14444          4
14449          1
14450          4
14480          1
14489          1
14490         10
14495          1
14498          1
14499         13
14500        107
14540          1
14550          1
14590          2
14599          3
14600         11
14650          6
14690          1
14699          4
14700         25
14749          1
14750         11
14780          1
14790          4
14800         27
14850          7
14870          1
14880          1
14890          2
14899          2
14900         86
14950         24
14975          1
14980          1
14986          1
14990         35
14998          1
14999         48
15000         93
15100          2
15120          2
15150          2
15199          3
15200         21
15232          1
15249          1
15250          8
15290          2
15300         17
15350          2
15390          2
15399          1
15400         22
15432          1
15450          8
15490          5
15498          1
15499          9
15500         91
15550          3
15555          4
15590          5
15595          1
15599          1
15600         12
15650          1
15690          2
15699          2
15700         12
15749          1
15750         12
15777          1
15780          1
15790          1
15799          3
15800         25
15850          5
15880          1
15888          1
15890          2
15899          3
15900         61
15950         13
15980          2
15990         26
15995          2
15998          2
15999         40
16000         38
16100          2
16150          3
16199          2
16200         19
16250          4
16290          1
16299          5
16300         12
16350          4
16390          4
16399          1
16400         18
16444          1
16450          8
16480          1
16485          1
16490         11
16495          1
16499         11
16500         88
16590          2
16599          2
16600          9
16650          2
16666          1
16690          1
16700          7
16750         10
16780          1
16790          4
16799          4
16800         29
16849          1
16850          6
16880          3
16890          1
16899          3
16900         71
16940          1
16950         12
16960          2
16975          1
16980          2
16990         23
16998          2
16999         33
17000         42
17100          7
17190          1
17200         12
17250          5
17290          1
17299          2
17300         10
17350          1
17370          1
17399          1
17400         14
17444          1
17450         10
17480          2
17490          8
17498          1
17499          5
17500         74
17550          2
17590          2
17599          2
17600          6
17650          1
17680          1
17699          1
17700          7
17750          4
17770          1
17777          2
17799          1
17800         20
17850          6
17880          1
17888          1
17889          1
17890          4
17900         71
17950          9
17980          4
17989          1
17990         15
17995          2
17996          1
17999         22
18000         37
18099          1
18181          1
18200          4
18250          8
18276          1
18300         10
18350          1
18400         12
18420          1
18450          3
18490         10
18499          9
18500         56
18555          1
18599          3
18600          4
18650          4
18690          2
18699          1
18700          7
18749          1
18750          8
18777          1
18790          3
18800         11
18850          2
18886          1
18888          2
18890          1
18899          1
18900         54
18950          6
18980          1
18990         16
18999         23
19000         34
19100          1
19121          1
19149          1
19190          1
19199          1
19200          8
19230          1
19250          1
19269          1
19290          1
19300          8
19350          1
19399          1
19400          3
19450          2
19480          2
19490          6
19499          6
19500         63
19550          1
19590          1
19599          1
19600          5
19650          3
19700          5
19750          5
19780          1
19790          1
19800         18
19850          8
19880          1
19890          2
19899          2
19900         53
19911          1
19950         16
19960          1
19980          3
19985          1
19990         24
19995          2
19998          2
19999         44
20000         29
20150          1
20199          1
20200          5
20250          4
20299          1
20335          1
20350          2
20399          1
20400          3
20450          2
20490          2
20499          8
20500         29
20550          1
20590          3
20595          1
20599          1
20600          2
20650          2
20700          3
20750          6
20800         10
20825          1
20845          1
20880          2
20888          1
20890          1
20900         25
20950          6
20980          1
20990          9
20999         12
21000         35
21049          1
21200          1
21250          1
21275          1
21299          1
21300          6
21399          2
21400          8
21450          4
21490          4
21499          4
21500         41
21550          1
21600          3
21650          1
21700          7
21749          1
21750          4
21777          1
21790          1
21800          7
21830          1
21850          3
21890          2
21899          2
21900         36
21950          6
21959          1
21980          3
21990         12
21995          1
21999         18
22000         27
22100          1
22150          1
22200          1
22222          3
22250          4
22300          7
22320          1
22350          1
22390          1
22399          2
22400          4
22450          3
22480          1
22490          4
22499          5
22500         41
22550          1
22599          1
22690          1
22700          3
22750          1
22790          1
22799          1
22800          6
22850          1
22890          2
22900         35
22950          2
22989          1
22990         10
22996          1
22999          6
23000         20
23100          1
23150          1
23200          6
23250          4
23299          1
23300          4
23390          1
23399          1
23400          1
23445          1
23450          5
23456          1
23490          3
23499          6
23500         41
23550          1
23600          5
23650          1
23699          2
23700          1
23720          1
23750          3
23760          1
23799          1
23800          7
23890          2
23899          2
23900         30
23950          8
23990          7
23999         14
24000         23
24200          6
24250          2
24300          5
24301          1
24350          2
24390          2
24399          1
24400          7
24450          2
24490          3
24495          1
24499          1
24500         38
24600          1
24650          1
24699          1
24700          3
24750          2
24800          4
24850          3
24900         24
24950         10
24980          1
24987          1
24990          5
24999         16
25000         23
25200          2
25230          1
25300          1
25400          2
25490          3
25499          1
25500         30
25599          1
25600          2
25650          2
25699          1
25700          2
25750          2
25800          3
25850          1
25880          1
25890          2
25900         25
25950          3
25980          1
25987          1
25990          8
25999         13
26000         11
26199          1
26200          4
26250          2
26299          1
26300          2
26390          1
26399          1
26400          3
26449          1
26450          2
26490          1
26499          5
26500         35
26590          1
26600          2
26749          1
26800          3
26850          5
26888          1
26899          1
26900         24
26950          1
26990          5
26999          8
27000         17
27100          1
27200          2
27300          3
27350          2
27390          1
27400          1
27450          4
27490          1
27499          4
27500         30
27600          3
27650          1
27675          1
27690          1
27700          1
27750          4
27777          2
27790          1
27800          7
27828          1
27850          2
27899          2
27900         23
27950          4
27990          7
27999          5
28000         11
28200          3
28399          1
28400          2
28450          2
28470          1
28490          4
28499          2
28500         17
28600          1
28690          1
28699          1
28750          3
28800          5
28850          1
28880          1
28899          1
28900         18
28950          1
28955          1
28987          1
28990          1
28999          6
29000         10
29199          1
29200          1
29240          1
29250          2
29400          1
29445          1
29450          3
29499          1
29500         15
29550          1
29600          1
29700          1
29750          2
29777          1
29780          1
29799          1
29800          5
29850          4
29900         16
29950          5
29970          1
29980          1
29990          9
29995          1
29998          1
29999         10
30000         22
30100          1
30200          2
30210          1
30400          1
30450          1
30490          1
30500          3
30700          1
30875          1
30900          5
30950          1
30980          1
30999          1
31000          9
31200          1
31250          1
31300          1
31490          1
31500         13
31555          1
31599          1
31600          1
31700          1
31800          1
31900         10
31950          1
31990          2
31999          1
32000          5
32200          1
32300          1
32399          1
32400          2
32480          1
32490          2
32499          1
32500         16
32649          1
32750          1
32800          1
32900         16
32940          1
32950          1
32980          2
32990          4
32999          2
33000         12
33200          1
33250          1
33400          3
33490          1
33499          1
33500          5
33590          1
33700          1
33750          1
33800          1
33850          2
33860          1
33890          1
33900          5
33950          1
33980          2
33996          1
33997          1
33999          2
34000          8
34200          1
34490          2
34500          9
34550          1
34699          1
34700          2
34800          2
34850          2
34890          1
34900          4
34950          3
34990          2
34996          2
34999          3
35000         13
35250          1
35330          1
35370          1
35400          2
35499          2
35500         10
35555          1
35800          2
35850          1
35900         11
35950          1
35980          1
35990          2
35999          2
36000          5
36200          1
36390          1
36399          1
36420          1
36440          1
36500          6
36800          3
36900          3
36950          1
36990          2
36999          4
37000          3
37175          1
37200          2
37300          2
37400          1
37500          8
37800          4
37880          1
37900          7
37999          4
38000          3
38200          3
38500          6
38600          1
38800          3
38850          1
38900          4
38950          2
38990          2
38999          2
39000          7
39300          1
39400          1
39500          5
39600          2
39660          1
39750          1
39800          2
39830          1
39890          1
39900         14
39950          3
39979          1
39990          1
39999          5
40000          8
40500          3
40800          1
40830          1
40850          1
40900          1
40950          2
40990          1
40999          3
41000          1
41400          2
41500          4
41650          1
41790          2
41800          1
41890          1
41900          6
41999          1
42000          5
42499          2
42500          6
42600          1
42800          1
42900          5
42950          1
42990          1
42996          1
42999          1
43000          6
43390          1
43500          5
43800          1
43900          5
43911          1
43999          1
44000          1
44300          1
44500          2
44750          1
44800          1
44900          6
45000          3
45499          1
45500          2
45507          1
45900          2
46000          2
46320          1
46500          2
46840          1
46900          4
46990          1
46999          1
47000          3
47500          4
47600          1
47790          1
47800          2
47900          1
47999          2
48000          2
48500          1
48900          2
48911          1
48990          1
48999          1
49000          2
49400          1
49500          5
49650          1
49900          4
49999          2
50000          3
50799          1
50900          1
51750          1
51899          1
51981          1
52000          1
52500          2
52700          1
52890          1
52900          1
52999          1
53000          2
54000          1
54850          1
54899          1
54900          2
55000          3
55555          2
55800          1
55850          1
55900          2
55996          1
55999          1
56000          1
56500          1
56800          1
56900          2
57000          1
57250          1
57500          1
57599          1
57800          2
57900          1
57997          1
58000          1
58200          2
58399          1
58500          2
58888          1
58900          4
59000          3
59800          1
59900          1
59990          2
59999          1
60000          1
61500          1
61800          1
61900          1
61950          1
61990          1
62000          1
62500          2
62550          1
62890          1
62900          1
63000          1
63452          1
63500          2
63700          1
63900          1
64000          1
64280          1
64500          1
64900          2
64990          1
64999          2
65000          3
65700          2
65900          1
66000          1
66500          1
66900          1
66964          1
67200          1
67500          1
67997          1
67999          1
68000          1
68500          2
68599          1
69000          3
69499          1
69500          1
69800          1
69900          1
69990          1
69996          1
69999          1
70000          1
70007          1
70999          1
72500          3
72880          1
72900          1
73000          3
74899          1
74999          1
75500          1
75900          1
76000          1
78500          2
78993          1
79480          1
79500          2
79980          1
80000          2
81000          1
82500          1
82987          1
83000          2
84000          2
84900          1
84999          1
85000          2
87750          1
87991          1
88900          1
89000          1
92500          1
95000          4
95964          1
98500          1
99900          1
99990          1
99999          1
103990         1
103999         1
104900         1
105000         2
107000         1
108000         1
109000         1
115000         1
115900         1
116000         1
120000         1
120911         1
122500         1
123456         2
125000         1
129900         1
130000         1
134900         1
138000         1
139000         2
149000         1
155000         1
155500         1
163500         1
163991         1
165000         1
169999         1
171000         1
175000         1
179999         1
189981         1
205000         1
214800         1
225000         1
230000         2
239000         1
249000         1
250000         1
257500         1
260000         1
270000         1
300000         1
370000         1
395000         1
485000         1
487000         1
619000         1
700000         1
999999         1
1250000        1
2795000        1
9999999        1
10010011       1
12345678       1

'''
plt.figure(figsize=(7,6))
sns.histplot(data=cars, x='price')
plt.show()

price_summary=cars['price'].describe()
print('price summary: \n', price_summary)
'''
price summary: 
count      49531.000
mean        6567.220
std        86222.378
min            0.000
25%         1150.000
50%         2950.000
75%         7100.000
max     12345678.000
Summary shows that there is a huge difference between mean and median(50%). 
So, there are many outliers.
'''
# boxplot is same as dataframe.describe(). It shows 5 point summary.
# It can be used for two variables x=categorical variable, y=numerical variable OR just y=numerical variable
# Because of many outliers, it is not able to show proper boxplot also.
plt.figure(figsize=(7,6))
sns.boxplot(y=cars['price'])
plt.show()

cars_with_price_lesser_than_100 = cars[cars['price'] < 100]
print("total records with price < 100")
print(cars_with_price_lesser_than_100.shape[0]) # 1748

cars_with_price_greater_than_150000 = cars[cars['price'] > 150000]
print("total records with price > 150000")
print(cars_with_price_greater_than_150000.shape[0]) # 34
# working range - 100 and 150000

# variable powerPS - You will find the same problem with powerPS also
powerPS_count=cars['powerPS'].value_counts().sort_index()
print(powerPS_count.to_string())
'''
powerPS
0        5533
1           3
2           2
3           2
4           4
5          17
6           2
7           1
9           1
10          2
11          4
12          6
13          1
14          6
15          3
16          1
18          9
19          2
20          1
22          1
23          3
24          5
26         46
27          5
29          2
30          7
31          1
32          2
33          5
34         29
35          3
36          1
37         11
38          4
39         18
40         39
41         51
42          1
43         24
44         65
45        388
46          5
47          4
48         12
49          2
50        580
51          8
52         41
53         27
54        755
55        285
56         34
57         19
58        488
59         41
60       2149
61        151
62         15
63         53
64        212
65        300
66         22
67         55
68        345
69        482
70        137
71        185
72         73
73         90
74         46
75       3229
76         41
77        121
78         25
79         10
80        515
81         17
82        319
83         51
84        149
85         81
86        349
87        110
88        223
89         20
90       1634
91         22
92         68
93          3
94         51
95        378
96         19
97         57
98        168
99         85
100       182
101      1745
102       816
103       131
104        20
105      1334
106        62
107       171
108        16
109       649
110       657
111        71
112        31
113       120
114       124
115       439
116      1639
117        25
118       172
119         8
120       508
121        59
122       727
123         3
124        36
125       930
126        75
127         4
128        60
129       213
130       134
131       667
132        57
133        89
134        10
135       136
136       908
137        19
138         8
139        29
140      1776
141       106
142         5
143       815
144       105
145       141
146        17
147       162
148        10
149         8
150      2043
151        28
152        14
154        10
155       112
156       134
157         6
158        18
159         3
160       334
161         4
162         4
163       837
164         6
165       129
166        45
167        11
168         4
169        14
170      1493
171        21
172         5
173        28
174       204
175        59
176         5
177       462
178        13
179       325
180        99
181         5
182        10
183         6
184       377
185        70
186         4
187         3
188        12
189         7
190       239
191         2
192       249
193       349
194        28
195         5
196         9
197       154
198         8
199        11
200       302
201        13
202         1
203         9
204       332
205        26
207        26
208         7
209        32
210        18
211       173
212         5
213         7
214         2
215        14
216         3
217         7
218       284
219         2
220       117
222         3
223        10
224       312
225        17
226        24
227         1
228         8
230        65
231       307
232        98
233        11
234         9
235       111
236         1
237         2
238        10
239       142
240        18
241        39
245       136
246         1
247         1
248         1
249         4
250       145
251         1
252        13
253         2
254         4
255         2
256        27
257         1
258        60
259         1
260        37
261         1
262         2
264         4
265        87
268         1
269         2
270         8
271        13
272       112
273         5
274         1
275        20
276         2
277         4
278         2
279        34
280        49
281         2
283         1
284         7
285         5
286       108
287         3
288         2
289         1
290         9
292        12
293         1
295        15
296         1
298         4
299        45
300        56
301         1
303         2
304         1
305        19
306       148
307         3
309         3
310        16
311         4
313        39
314         2
315         7
316         1
318         3
320        42
321         6
322         2
324         1
325        15
326        36
328         2
329         1
330        15
333        36
334        13
336         1
338         1
340        56
343        11
344        14
345        10
347         2
348         1
349        11
350        11
352         1
353         1
354        15
355        15
358         2
360        14
362         2
363         3
364         1
365         1
367        15
370         3
371         2
374         1
375         2
377         1
379         2
380         3
381         2
382         1
383         1
385        16
386         1
387        28
388         1
390         2
392         2
394         2
396         8
398         1
400        28
401         1
404         1
405         2
408        18
409         1
415         1
416         1
420        24
421         5
425         1
426         2
430         1
431         2
435         9
436         3
439         2
441         1
445         2
449         2
450        23
455         1
457         7
460         1
462         1
475         1
476        12
480         5
481         1
483         1
487         4
489         3
500        22
506         2
507         7
510         1
514         3
515         1
521         1
525         8
530         1
540         1
550         2
553         1
555         1
557         3
560         1
570         1
571         2
579         7
585         4
600         3
603         2
606         1
610         2
612         1
619         1
640         1
672         1
685         1
700         2
702         1
721         1
740         1
754         1
776         1
800         1
850         1
871         1
950         1
952         1
963         1
998         1
1000        1
1001        2
1012        1
1021        1
1062        1
1082        1
1102        1
1105        1
1160        1
1200        1
1223        1
1256        1
1363        1
1416        1
1502        1
1595        1
1598        1
1625        1
1653        1
1799        1
1910        1
1968        1
1992        1
1998        1
2004        1
2017        1
2172        1
2461        1
2789        1
6226        1
11620       1
12510       1
12512       1
12684       1
15017       1
15033       1
16011       1
16312       1
19211       1
19312       1

powerPS=0 doesn't make sense and it has 5533 records. We have to do something about powerPS range also.
'''
powerPS_summary = cars['powerPS'].describe()
print("powerPS Summary: \n", powerPS_summary)
'''
powerPS Summary: 
count   49531.000
mean      116.501
std       231.536
min         0.000
25%        69.000
50%       105.000
75%       150.000
max     19312.000
Name: powerPS, dtype: float64

Here, mean and median are not far away, but std is huge. If you are going to deviate by 231 units from mean, then that's a lot.

What is Standard deviation?
https://byjus.com/maths/standard-deviation/
Watch 'Variance and Standard Deviation.mp4' video
Standard Deviation is a measure which shows how much variation (such as spread, dispersion, spread,) from the mean exists. 
The standard deviation indicates a typical deviation from the mean. 
It is a popular measure of variability because it returns to the original units of measure of the data set. 
Like the variance, if the data points are close to the mean, there is a small variation whereas the data points are highly spread out from the mean, then it has a high variance. 
Standard deviation calculates the extent to which the values differ from the average. 
Standard Deviation, the most widely used measure of dispersion, is based on all values.
'''
plt.figure(figsize=(7,6))
sns.histplot(data=cars, x='powerPS')
plt.show()

plt.figure(figsize=(7,6))
sns.boxplot(y=cars['powerPS'])
plt.show()
'''
Unlike to price's boxplot, here you are seeing at least lines of the box. Yes, there are outliers and we have to fix them.
'''

plt.figure(figsize=(7,6))
sns.regplot(data=cars, x='powerPS', y='price', scatter=True, fit_reg=False)
plt.show()
'''
There are many 0s in PowerPS. So, majority of the dots towards the left bottom corner. We need to fix them.
'''

cars_with_powerPS_lesser_than_10 = cars[cars['powerPS'] < 10]
print("total records with powerPS < 10")
print(cars_with_powerPS_lesser_than_10.shape[0]) # 5565

cars_with_powerPS_greater_than_500 = cars[cars['powerPS'] > 500]
print("total records with powerPS > 500")
print(cars_with_powerPS_greater_than_500.shape[0]) # 115
# Working range - 10 and 500

cars_with_powerPS_in_between_than_10_and_500 = cars[(cars['powerPS'] > 10) & (cars['powerPS'] < 500)]
print("total records with powerPS > 10 and < 500")
print(cars_with_powerPS_in_between_than_10_and_500.shape[0]) # 43827